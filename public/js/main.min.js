App="undefined"==typeof App?{}:App,App.Events=jQuery({}),jQuery(function(a){var b=a(".social-picture-selector");b.on("click",".picture",function(b){b.preventDefault(),jQuery('input[name="picture"]').val(a(this).attr("src"))})}),App.Votes={init:function(){this.$button=jQuery(".vote"),this.handleEvents()},handleEvents:function(){var a=this;console.log(a.$button),a.$button.on("click",jQuery.proxy(a.addVote,a))},addVote:function(a){a.preventDefault();var b=jQuery(a.currentTarget),c=this.sendVote({picture_id:b.data("picture")});c.done(function(a){1==a.status?console.log(a.message):console.log(a)})},sendVote:function(a){return jQuery.ajax({url:BASE+"/pictures/vote/add",type:"POST",dataType:"json",data:a})}},App.Votes.init(),App.Follow={init:function(){this.button=jQuery(".follow"),this.handleEvents()},handleEvents:function(){var a=this;a.button.on("click",function(b){b.preventDefault(),0==$(this).data("followed")?a.follow($(this)):a.unfollow($(this))})},follow:function(a){var b=this.sendFollow("follow",{user_id:a.data("user")});b.done(function(b){1==b.status?(console.log(b.message),a.data("followed","1")):console.log(b)})},unfollow:function(a){var b=this.sendFollow("unfollow",{user_id:a.data("user")});b.done(function(b){1==b.status?(console.log(b.message),a.data("followed","0")):console.log(b)})},sendFollow:function(a,b){var c=BASE+"/profile/"+a;return jQuery.ajax({url:c,type:"POST",dataType:"json",data:b})}},App.Follow.init(),App.Pictures={init:function(){this.$button=jQuery("#load_more"),this.$container=jQuery("#pictures"),this.handle_events()},handle_events:function(){this.$button.on("click",jQuery.proxy(this.load,this))},load:function(a){a.preventDefault();var b=parseInt(this.$button.data("total")),c=parseInt(this.$button.data("from"));if(b>0&&c>0){var d=jQuery.ajax({url:"/latest/"+b+"/"+c,type:"GET",dataType:"html"});d.done(jQuery.proxy(this.recieved,this)),d.fail(function(a){console.log(a)})}},recieved:function(a){return a.length<=0?(this.$button.remove(),void 0):(this.$container.append(a),this.$button.data("from",2*parseInt(this.$button.data("from"))),void 0)}},App.Pictures.init();